(()=>{"use strict";const e=function(e,t){try{const o=localStorage.getItem("lang")||"en",a="success"===e,r=a?"en"===o?"Success":"УСПІШНО":"en"===o?"ERROR!":"ПОМИЛКА!",n=a?{en:"The request was successfully completed.",uk:"Запит успішно виконано."}:{en:"Please try again to complete the request.",uk:"Спробуйте ще раз, щоб виконати запит."},c=a?"en"===o?"Continue":"Продовжити":"en"===o?"Try Again":"Спробуйте знову";console.log(t);const s=`\n        <div id="popup" class="popup ${a?"":"_popup-error"}">\n            <div class="popup__block">\n                <header class="popup__header">\n                    <div class="popup__logo">\n                        <img src="../img/PopUp/${a?"Success":"Error"}.jpg" alt="${r}" class="popup__img">\n                    </div>\n                    <h6 class="popup__title">${r}</h6>\n                </header>\n                <p class="popup__body">${t[o]}</p>\n                <footer class="popup__footer">\n                    <p class="popup__text">${n[o]}</p>\n                    <button class="popup__btn">${c}</button>\n                </footer>\n            </div>\n        </div>`;if(!a&&"error"!==e)return console.error("Invalid popup type");document.body.insertAdjacentHTML("beforeend",s),document.querySelector("#popup .popup__btn").addEventListener("click",(()=>{document.querySelector("#popup").remove()}))}catch(e){console.log(e)}};async function t(){try{const e=await fetch("https://pp-mk.onrender.com/profile/logout",{method:"POST",credentials:"include"});if(!e.ok)throw await e.json();const t=await e.json();t?.message&&console.log(t?.message),document.location.reload()}catch(t){t?.message&&console.log(t.message);const o={notFind:()=>e("error",{en:"User not found.",uk:"Користувача не знайдено."}),unauthorizedUser:()=>e("error",{en:"Unauthorized user.",uk:"Неавторизований користувач."}),oldData:()=>e("error",{en:"False data.",uk:"Хибні дані."}),serverError:()=>e("error",{en:"Server error. Reload the page, or contact technical support.",uk:"Помилка сервера. Перезагрузість сторінку, або зверніться в тех підтримку."})};t?.error&&o[t.error]?o[t.error]():e("error",{en:"Unknown error type. Please try again.",uk:"Невідомий тип помилки. Будь ласка спробуйте ще раз."})}}document.addEventListener("DOMContentLoaded",(()=>{!async function(){try{const e=await fetch("https://pp-mk.onrender.com/profile/info",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)throw await e.json();const o=await e.json(),a=document.querySelector("[data-account-img]"),r=document.querySelector("[data-account-name]"),n=document.querySelector("[data-account-auth]"),c=document.querySelector("[data-profile]"),s=localStorage.getItem("lang");n&&(n.href="#",n.addEventListener("click",t)),n.innerText="en"===s&&n?"Sign out":"Вийти",a&&(a.src=o.img||"img/HomePage/account.webp"),r&&(r.innerText=o.name||"Account"),c&&(c.href="pages/profile.html")}catch(t){t?.message&&console.log(t.message),t?.error&&"serverError"===t?.error&&e("error",{en:"Server error. Reload the page, or contact technical support.",uk:"Помилка сервера. Перезагрузість сторінку, або зверніться в тех підтримку."})}}(),document.querySelectorAll("a[data-json-path]").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const o=e.getAttribute("data-json-path");localStorage.setItem("jsonPath",o),window.location.href=e.href}))}))})),document.querySelector(".wrapper").addEventListener("click",(e=>{const t=e.target;if(t.closest("[data-tab-btn]")){const e=document.querySelector(".catalog"),n=t.closest("[data-tab-btn]").dataset.tabBtn,c=document.querySelectorAll("[data-tab-btn]"),s=document.querySelectorAll("[data-tab]");e.classList.add("_active-tab-container"),r(c,s),o=s,a=n,c.forEach((e=>{a===e.dataset.tabBtn&&e.classList.add("_active-tab-btn")})),o.forEach((e=>{a===e.dataset.tab&&e.classList.add("_active-tab")}))}var o,a;if(t.closest("[data-tab-remove]")){const e=document.querySelector(".catalog"),t=document.querySelectorAll("[data-tab-btn]"),o=document.querySelectorAll("[data-tab]");e.classList.remove("_active-tab-container"),r(t,o)}function r(e,t){e.forEach((e=>{e.classList.contains("_active-tab-btn")&&e.classList.remove("_active-tab-btn")})),t.forEach((e=>{e.classList.contains("_active-tab")&&e.classList.remove("_active-tab")}))}}))})();