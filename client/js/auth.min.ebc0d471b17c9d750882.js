(()=>{"use strict";const e=function(e,r){try{const t=localStorage.getItem("lang")||"en",o="success"===e,s=o?"en"===t?"Success":"УСПІШНО":"en"===t?"ERROR!":"ПОМИЛКА!",a=o?{en:"The request was successfully completed.",uk:"Запит успішно виконано."}:{en:"Please try again to complete the request.",uk:"Спробуйте ще раз, щоб виконати запит."},n=o?"en"===t?"Continue":"Продовжити":"en"===t?"Try Again":"Спробуйте знову";console.log(r);const c=`\n        <div id="popup" class="popup ${o?"":"_popup-error"}">\n            <div class="popup__block">\n                <header class="popup__header">\n                    <div class="popup__logo">\n                        <img src="../img/PopUp/${o?"Success":"Error"}.jpg" alt="${s}" class="popup__img">\n                    </div>\n                    <h6 class="popup__title">${s}</h6>\n                </header>\n                <p class="popup__body">${r[t]}</p>\n                <footer class="popup__footer">\n                    <p class="popup__text">${a[t]}</p>\n                    <button class="popup__btn">${n}</button>\n                </footer>\n            </div>\n        </div>`;if(!o&&"error"!==e)return console.error("Invalid popup type");document.body.insertAdjacentHTML("beforeend",c),document.querySelector("#popup .popup__btn").addEventListener("click",(()=>{document.querySelector("#popup").remove()}))}catch(e){console.log(e)}};async function r(r,t){const o={username:r.querySelector('[data-form="login"]').value.trim(),password:r.querySelector('[data-form="password"]').value.trim()};r.querySelector('[data-form="email"]')&&(o.email=r.querySelector('[data-form="email"]').value.trim());try{const r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!r.ok)throw await r.json();const s=await r.json();s?.message&&console.log(s.message),e("success",{en:"Operation was successful.",uk:"Операція пройшла успішно."}),window.location.href="/index.html"}catch(t){t?.message&&console.log(t.message),function(e,r="false",t=""){const o=document.querySelector("."+e);if(!o)return void console.error(`Елемент із селектором "${e}" не знайдено.`);const s={remove:()=>t?o.classList.remove(t):o.classList.remove(e),toggle:()=>t?o.classList.toggle(t):o.classList.toggle(e),add:()=>t?o.classList.add(t):o.classList.add(e)};s[r]&&s[r]()}("_error","remove");const o={usernameSymbol:()=>r.querySelector('[data-form="login"]').parentElement.classList.add("_error"),passwordLength:()=>r.querySelector('[data-form="password"]').parentElement.classList.add("_error"),userExists:()=>e("error",{en:"A user with that name already exists.",uk:"Користувач з таким іменем вже існує."}),incorrectName:()=>r.querySelector('[data-form="login"]').parentElement.classList.add("_error"),incorrectPassword:()=>r.querySelector('[data-form="password"]').parentElement.classList.add("_error"),serverError:()=>e("error",{en:"Server Error. Please try again.",uk:"Помилка сервера, спробуйте ще раз."})};t?.error&&o[t.error]?o[t.error]():e("error",{en:"Unknown error type. Please try again.",uk:"Невідомий тип помилки. Будь ласка спробуйте ще раз."})}}document.querySelector("#authForm").addEventListener("submit",(function(e){e.preventDefault(),localStorage.getItem("lang"),r(e.target,"https://pp-mk.onrender.com/profile/login")})),document.querySelector("#registrForm").addEventListener("submit",(function(e){e.preventDefault(),localStorage.getItem("lang"),r(e.target,"https://pp-mk.onrender.com/profile/register")})),document.body.addEventListener("click",(function(e){const r=e.target,t=document.body;r.closest("[data-btn]")&&t.classList.toggle("_change-bg")}))})();