(()=>{"use strict";const e=function(e,o){try{const r=localStorage.getItem("lang")||"en",t="success"===e,n=t?"en"===r?"Success":"УСПІШНО":"en"===r?"ERROR!":"ПОМИЛКА!",a=t?{en:"The request was successfully completed.",uk:"Запит успішно виконано."}:{en:"Please try again to complete the request.",uk:"Спробуйте ще раз, щоб виконати запит."},s=t?"en"===r?"Continue":"Продовжити":"en"===r?"Try Again":"Спробуйте знову";console.log(o);const c=`\n        <div id="popup" class="popup ${t?"":"_popup-error"}">\n            <div class="popup__block">\n                <header class="popup__header">\n                    <div class="popup__logo">\n                        <img src="../img/PopUp/${t?"Success":"Error"}.jpg" alt="${n}" class="popup__img">\n                    </div>\n                    <h6 class="popup__title">${n}</h6>\n                </header>\n                <p class="popup__body">${o[r]}</p>\n                <footer class="popup__footer">\n                    <p class="popup__text">${a[r]}</p>\n                    <button class="popup__btn">${s}</button>\n                </footer>\n            </div>\n        </div>`;if(!t&&"error"!==e)return console.error("Invalid popup type");document.body.insertAdjacentHTML("beforeend",c),document.querySelector("#popup .popup__btn").addEventListener("click",(()=>{document.querySelector("#popup").remove()}))}catch(e){console.log(e)}};document.addEventListener("DOMContentLoaded",(async o=>{try{const e=await fetch("https://pp-mk.onrender.com/profile/info",{method:"GET",credentials:"include"});if(!e.ok)throw await e.json();const o=await e.json(),r={name:"",email:"",age:"2000-10-01"};["name","email","age"].forEach((e=>{const t=document?.querySelector(`[data-account="${e}"]`);t&&(t.value=o?.[e]||r[e])}))}catch(o){o?.message&&console.log(o?.message);const r={notFind:()=>e("error",{en:"User not found.",uk:"Користувача не знайдено."}),unauthorizedUser:()=>e("error",{en:"Unauthorized user.",uk:"Неавторизований користувач."}),oldData:()=>e("error",{en:"False data.",uk:"Хибні дані."}),serverError:()=>e("error",{en:"Server error. Reload the page, or contact technical support.",uk:"Помилка сервера. Перезагрузість сторінку, або зверніться в тех підтримку."})};o?.error&&r[o.error]?r[o.error]():e("error",{en:"Unknown error type. Please try again.",uk:"Невідомий тип помилки. Будь ласка спробуйте ще раз."})}})),document.body.addEventListener("click",(o=>{const r=o.target;r.closest("[data-dlt-account]")&&async function(){try{const o=await fetch("https://pp-mk.onrender.com/profile/delete",{method:"DELETE",credentials:"include"});if(!o.ok)throw await o.json();const r=await o.json();r?.message&&console.log(r?.message),e("success",{uk:"Аккаунт видалено.",en:"Account deleted."}),document.location.href="../index.html"}catch(o){o?.message&&console.log(o.message);const r={notFind:()=>e("error",{en:"User not found.",uk:"Користувача не знайдено."}),unauthorizedUser:()=>e("error",{en:"Unauthorized user.",uk:"Неавторизований користувач."}),oldData:()=>e("error",{en:"False data.",uk:"Хибні дані."}),serverError:()=>e("error",{en:"Server error. Reload the page, or contact technical support.",uk:"Помилка сервера. Перезагрузість сторінку, або зверніться в тех підтримку."})};o?.error&&r[o.error]?r[o.error]():e("error",{en:"Unknown error type. Please try again.",uk:"Невідомий тип помилки. Будь ласка спробуйте ще раз."})}}(),r.closest("[data-updt-account]")&&async function(){const o={username:document.querySelector('[data-account="name"]').value.trim(),email:document.querySelector('[data-account="email"]').value.trim(),age:document.querySelector('[data-account="age"]').value.trim()};try{const r=await fetch("https://pp-mk.onrender.com/profile/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!r.ok)throw await r.json();const t=await r.json();t?.message&&console.log(t?.message),e("success",{uk:"Аккаунт оновлено.",en:"Account updated."}),document.location.reload()}catch(o){o?.message&&console.log(o?.message);const r={notFind:()=>e("error",{en:"User not found.",uk:"Користувача не знайдено."}),unauthorizedUser:()=>e("error",{en:"Unauthorized user.",uk:"Неавторизований користувач."}),oldData:()=>e("error",{en:"False data.",uk:"Хибні дані."}),noData:()=>e("error",{en:"Missing data.",uk:"Відсутні дані."}),serverError:()=>e("error",{en:"Server error. Reload the page, or contact technical support.",uk:"Помилка сервера. Перезагрузість сторінку, або зверніться в тех підтримку."})};o?.error&&r[o.error]?r[o.error]():e("error",{en:"Unknown error type. Please try again.",uk:"Невідомий тип помилки. Будь ласка спробуйте ще раз."})}}()}))})();